# MediHome データ構造リファレンス

**最終更新**: 2025年12月15日
**データソース**: 厚生労働省 医療情報ネット オープンデータ（2025年12月1日時点）

---

## データ概要

### 取得済みデータファイル

| ファイル名 | 施設タイプ | 件数 | 説明 |
|-----------|----------|------|------|
| `urayasu_hospitals.csv` | 病院 | 5件 | 20床以上の医療施設 |
| `urayasu_clinics_real.csv` | 診療所 | 73件 | 19床以下の医療施設 |
| `urayasu_dental.csv` | 歯科診療所 | 60件 | 歯科専門の診療所 |
| `urayasu_maternity.csv` | 助産所 | 2件 | 助産所 |
| `urayasu_pharmacy.csv` | 薬局 | 58件 | 調剤薬局 |
| `urayasu_hours_real.csv` | 診療科・時間 | 615件 | 診療科目と診療時間の詳細 |
| **合計** | - | **198施設** | - |

---

## 共通フィールド（全施設タイプ）

### 基本情報

| フィールド名 | 型 | 必須 | 説明 | サンプル値 |
|------------|----|----|------|-----------|
| `ID` | String | ✅ | 施設識別子（13桁） | `"1221200829000"` |
| `正式名称` | String | ✅ | 施設の正式名称 | `"順天堂大学医学部附属浦安病院"` |
| `正式名称（フリガナ）` | String | ✅ | カタカナ読み | `"ジュンテンドウダイガク..."` |
| `略称` | String | - | 略称（任意） | `""` |
| `略称（フリガナ）` | String | - | 略称のカタカナ読み | `""` |
| `英語表記（ローマ字表記）` | String | - | ローマ字表記 | `"Juntendodaigaku..."` |
| `機関区分` | String | ✅ | 施設タイプコード | `"1"` (病院) |

**機関区分コード**:
- `"1"`: 病院
- `"2"`: 診療所
- `"3"`: 歯科診療所
- `"4"`: 助産所
- `"5"`: 薬局

### 所在地情報

| フィールド名 | 型 | 必須 | 説明 | サンプル値 |
|------------|----|----|------|-----------|
| `都道府県コード` | String | ✅ | 都道府県コード（2桁） | `"12"` (千葉県) |
| `市区町村コード` | String | ✅ | 市区町村コード（3桁） | `"227"` (浦安市) |
| `所在地` | String | ✅ | 住所（完全形式） | `"千葉県浦安市富岡２－１－１"` |
| `所在地座標（緯度）` | String | ✅ | 緯度（文字列） | `"35.645981"` |
| `所在地座標（経度）` | String | ✅ | 経度（文字列） | `"139.907136"` |

**データ品質**:
- ✅ 緯度経度: 100%カバー（全198施設）
- ✅ ジオコーディング不要
- ⚠️ 一部の薬局で緯度経度が `"0.0"` の場合あり

### Webサイト情報

| フィールド名 | 型 | 必須 | 説明 | サンプル値 |
|------------|----|----|------|-----------|
| `案内用ホームページアドレス` (病院・診療所・歯科) | String | - | Webサイト URL | `"https://tokyobay-mc.jp/"` |
| `薬局のホームページアドレス` (薬局) | String | - | Webサイト URL | `"https://minatopharm.com/"` |

**データ品質**:
- ✅ 約70%の施設でWebサイト情報あり
- ⚠️ HTTP/HTTPS混在、末尾スラッシュの有無が不統一

### 休診日情報（病院・診療所・歯科）

#### 毎週決まった曜日に休診

| フィールド名 | 型 | 説明 | 値 |
|------------|----|----|---|
| `毎週決まった曜日に休診（月）` | String | 月曜休診フラグ | `"0"` (営業) / `"1"` (休診) / `""` (不明) |
| `毎週決まった曜日に休診（火）` | String | 火曜休診フラグ | 同上 |
| `毎週決まった曜日に休診（水）` | String | 水曜休診フラグ | 同上 |
| `毎週決まった曜日に休診（木）` | String | 木曜休診フラグ | 同上 |
| `毎週決まった曜日に休診（金）` | String | 金曜休診フラグ | 同上 |
| `毎週決まった曜日に休診（土）` | String | 土曜休診フラグ | 同上 |
| `毎週決まった曜日に休診（日）` | String | 日曜休診フラグ | 同上 |

**注意**: `"0"` = 営業、`"1"` = 休診、`""` = 不明（診療科別で異なる場合など）

#### 決まった週に休診（定期週）

各週（第1週〜第5週）× 曜日（月〜日）のフィールドあり（合計35フィールド）

- `決まった週に休診（定期週）第1週（月）`
- `決まった週に休診（定期週）第1週（火）`
- ... (以下同様)

**例**: 第2・第4土曜日が休診の場合
- `決まった週に休診（定期週）第2週（土）` = `"1"`
- `決まった週に休診（定期週）第4週（土）` = `"1"`

#### その他の休診情報

| フィールド名 | 型 | 説明 | サンプル値 |
|------------|----|----|-----------|
| `祝日に休診` | String | 祝日休診フラグ | `"0"` (営業) / `"1"` (休診) |
| `その他の休診日（gw、お盆等）` | String | 不定期休診の説明 | `"GW、お盆、年末年始"` |

### 営業日情報（薬局）

| フィールド名 | 型 | 説明 | 値 |
|------------|----|----|---|
| `営業日（月）` | String | 月曜営業フラグ | `"1"` (営業) / `"0"` (休み) / `""` (不明) |
| `営業日（火）` | String | 火曜営業フラグ | 同上 |
| `営業日（水）` | String | 水曜営業フラグ | 同上 |
| `営業日（木）` | String | 木曜営業フラグ | 同上 |
| `営業日（金）` | String | 金曜営業フラグ | 同上 |
| `営業日（土）` | String | 土曜営業フラグ | 同上 |
| `営業日（日）` | String | 日曜営業フラグ | 同上 |
| `営業日（祝）` | String | 祝日営業フラグ | 同上 |

**注意**: 病院・診療所とは逆で、`"1"` = 営業、`"0"` = 休み

定期閉店情報も同様に週別のフィールドあり（`定期閉店第1週（月）` など）

---

## 施設タイプ別固有フィールド

### 病院・診療所固有フィールド

#### 病床数

| フィールド名 | 型 | 説明 | サンプル値 |
|------------|----|----|-----------|
| `一般病床` | String | 一般病床数 | `"785"` |
| `療養病床` | String | 療養病床数 | `"28"` |
| `療養病床のうち医療保険適用` | String | 医療保険適用の療養病床 | `"0"` |
| `療養病床のうち介護保険適用` | String | 介護保険適用の療養病床 | `"0"` |
| `精神病床` | String | 精神病床数 | `"0"` |
| `結核病床` | String | 結核病床数 | `"0"` |
| `感染症病床` | String | 感染症病床数 | `"4"` |
| `合計病床数` | String | 合計病床数 | `"785"` |

**データ品質**:
- ✅ 病院: 全施設で病床数あり
- ⚠️ 診療所: 多くは `"0"` または空文字（無床診療所が多い）

**施設分類の目安**:
- 病院: `合計病床数 >= 20`
- 診療所: `合計病床数 < 20`

---

## 診療科・時間データ（別ファイル）

### ファイル: `urayasu_hours_real.csv`

病院・診療所・歯科の診療科目と診療時間の詳細情報（615レコード）

### 基本フィールド

| フィールド名 | 型 | 必須 | 説明 | サンプル値 |
|------------|----|----|------|-----------|
| `ID` | String | ✅ | 施設識別子（施設情報と紐付け） | `"1221200829000"` |
| `診療科目コード` | String | ✅ | 診療科コード（5桁） | `"05002"` |
| `診療科目名` | String | ✅ | 診療科名 | `"耳鼻いんこう科"` |
| `診療時間帯` | String | ✅ | 時間帯区分 | `"1"` (午前) / `"2"` (午後) / `"3"` (夜間) |

**診療時間帯の意味**:
- `"1"`: 午前（通常9:00〜12:00頃）
- `"2"`: 午後（通常14:00〜18:00頃）
- `"3"`: 夜間（通常18:00以降）

### 診療時間フィールド（各曜日）

各曜日 × 開始時間・終了時間のフィールド（合計14フィールド）

| フィールド名 | 型 | 説明 | サンプル値 |
|------------|----|----|-----------|
| `月_診療開始時間` | String | 月曜診療開始 | `"09:00"` |
| `月_診療終了時間` | String | 月曜診療終了 | `"12:00"` |
| `火_診療開始時間` | String | 火曜診療開始 | `"09:00"` |
| `火_診療終了時間` | String | 火曜診療終了 | `"12:00"` |
| ... (水〜日・祝も同様) | String | - | - |

**注意**: 休診の曜日は空文字 `""`

### 外来受付時間フィールド（各曜日）

診療開始の30分前など、受付時間が異なる場合に使用

| フィールド名 | 型 | 説明 | サンプル値 |
|------------|----|----|-----------|
| `月_外来受付開始時間` | String | 月曜受付開始 | `"08:30"` |
| `月_外来受付終了時間` | String | 月曜受付終了 | `"12:00"` |
| `火_外来受付開始時間` | String | 火曜受付開始 | `"08:30"` |
| `火_外来受付終了時間` | String | 火曜受付終了 | `"12:00"` |
| ... (水〜日・祝も同様) | String | - | - |

**データ品質**:
- ⚠️ 多くのレコードで診療時間・受付時間が空文字
- ✅ 一部の施設では詳細な時間情報あり

### 主要診療科目コードと名称

Phase 0で確認された主要診療科（Top 10）:

| コード | 診療科目名 | 件数 | 備考 |
|-------|----------|------|------|
| - | 内科 | 40件 | 最多 |
| - | 小児科 | 17件 | 子育てスコアに重要 |
| - | 消化器内科 | 16件 | - |
| - | 皮膚科 | 15件 | - |
| - | アレルギー科 | 12件 | 子育てスコアに重要 |
| - | 循環器内科 | 10件 | 高齢者スコアに重要 |
| - | 整形外科 | 8件 | 高齢者スコアに重要 |
| - | リハビリテーション科 | 8件 | 高齢者スコアに重要 |
| - | 泌尿器科 | 7件 | - |
| - | 心療内科 | 6件 | - |

---

## 薬局固有フィールド

### 開店時間フィールド

薬局は最大4つの時間帯に分けて営業時間を設定可能

#### 時間帯1

| フィールド名 | 型 | 説明 | サンプル値 |
|------------|----|----|-----------|
| `月_開店時間帯1_開始時間` | String | 月曜・時間帯1開始 | `"09:00"` |
| `月_開店時間帯1_終了時間` | String | 月曜・時間帯1終了 | `"13:00"` |
| ... (火〜日・祝も同様) | String | - | - |

#### 時間帯2〜4

同様のフィールドが `開店時間帯2`, `開店時間帯3`, `開店時間帯4` まで存在

**使用例**:
```
月曜: 09:00-13:00 (時間帯1), 14:00-19:00 (時間帯2)
```

**データ品質**:
- ✅ 多くの薬局で時間帯1・2が使用されている
- ⚠️ 時間帯3・4はほとんど使用されていない

---

## Phase 1で利用可能なデータ項目まとめ

### スコア算出に使用できる項目

#### 子育てスコア
- ✅ 小児科の件数（診療科データから）
- ✅ アレルギー科の件数
- ✅ 夜間診療対応（診療時間帯 `"3"` のレコード有無）
- ✅ 土日診療対応（休診日フラグから判定）
- ✅ 距離（緯度経度から計算）

#### 高齢者スコア
- ✅ 循環器内科・整形外科・リハビリ科の件数
- ✅ 訪問診療対応（データにフィールドあるか要確認）
- ✅ 病院の有無（病床数から判定）
- ✅ 距離（緯度経度から計算）

#### 一般医療スコア
- ✅ 内科の件数
- ✅ 診療科の多様性（診療科目数）
- ✅ 病院の有無
- ✅ 24時間対応（データにフィールドあるか要確認）
- ✅ 距離（緯度経度から計算）

### 地図表示に使用できる項目
- ✅ 施設名（`正式名称`）
- ✅ 緯度・経度（100%カバー）
- ✅ 住所（`所在地`）
- ✅ Webサイト（約70%）
- ✅ 診療科目リスト（診療科データから集約）
- ✅ 施設タイプ（機関区分）

### 詳細情報表示に使用できる項目
- ✅ 基本情報（名称、住所、電話番号※要確認）
- ✅ Webサイト
- ✅ 診療科目
- ✅ 診療時間（診療科データから）
- ✅ 休診日
- ✅ 病床数（病院の場合）

---

## データの制約・注意点

### 欠損値・不完全なデータ

1. **緯度経度が "0.0" のケース**
   - 一部の薬局で発生
   - Phase 1実装時にフィルタリングまたはジオコーディングが必要

2. **診療時間が空文字のケース**
   - 多くの診療科レコードで診療時間が未入力
   - 施設の公式サイトや電話確認が推奨される旨を表示

3. **Webサイトの形式不統一**
   - HTTP/HTTPS混在
   - 末尾スラッシュの有無
   - URL検証が必要

4. **休診日フラグの解釈**
   - `"0"` = 営業 / `"1"` = 休診 / `""` = 不明
   - 薬局は `"1"` = 営業 と逆になっている点に注意

### データ更新頻度

- **厚労省データ**: 四半期ごとに更新
- **取得データ**: 2025年12月1日時点
- **Phase 1実装時**: データ更新日を明記する必要あり

---

## 次のステップ

### Phase 1実装時のデータ処理方針

1. **データインポート**
   - 全施設タイプ（病院・診療所・歯科・助産所・薬局）を統合
   - 診療科データを施設データに統合（IDで紐付け）
   - 緯度経度が "0.0" のレコードを除外またはフラグ設定

2. **Prismaスキーマ設計**
   - 施設の基本情報テーブル
   - 診療科目テーブル（多対多リレーション）
   - 診療時間テーブル（診療科目ごと）

3. **スコア計算ロジック**
   - 診療科目のカウント
   - 距離計算（Haversine公式）
   - 営業時間の判定（夜間・土日）

4. **データ品質向上**
   - 緯度経度 "0.0" の施設にジオコーディング（国土地理院API）
   - URL検証とサニタイズ

---

**データソース**: 厚生労働省 医療情報ネット
**ライセンス**: 政府標準利用規約（第2.0版）
**データ更新**: 2025年12月1日時点

---

## 不動産取引データ

**別ドキュメント**: [real-estate-data-analysis.md](./real-estate-data-analysis.md)

### データサマリー

- **合計取引件数**: 563件（2024年度）
- **データソース**: 不動産情報ライブラリAPI（国土交通省）
- **ライセンス**: 政府標準利用規約（第2.0版）

### 主要フィールド

| フィールド名 | 型 | 説明 |
|------------|----|----|
| `DistrictName` | String | 地区名（例：日の出、高洲） |
| `TradePrice` | String | 取引価格（例："33000000" = 3,300万円） |
| `Type` | String | 物件タイプ（中古マンション等、宅地(土地と建物)） |
| `FloorPlan` | String | 間取り（例：３ＬＤＫ） |
| `Area` | String | 面積（㎡） |
| `BuildingYear` | String | 建築年（例：2001年） |
| `Structure` | String | 構造（ＲＣ、木造など） |
| `Period` | String | 取引時期（例：2024年第4四半期） |

詳細は [real-estate-data-analysis.md](./real-estate-data-analysis.md) を参照してください。
