generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model MedicalFacility {
  id           String       @id @default(cuid())
  facilityType String
  name         String
  postalCode   String
  address      String
  districtName String
  phoneNumber  String?
  latitude     Float
  longitude    Float

  departments Department[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([districtName])
  @@index([facilityType])
}

model Department {
  id                String          @id @default(cuid())
  facilityId        String
  facility          MedicalFacility @relation(fields: [facilityId], references: [id], onDelete: Cascade)

  departmentName    String
  consultationHours String?
  hasNightService   Boolean         @default(false)
  hasWeekendService Boolean         @default(false)
  hasHomeVisit      Boolean         @default(false)

  @@index([departmentName])
  @@index([facilityId])
}

model DistrictMedicalScore {
  id             String @id @default(cuid())
  districtName   String @unique

  childcareScore Int
  elderlyScore   Int
  generalScore   Int
  overallScore   Int

  scoreDetails String

  hospitalCount Int
  clinicCount   Int
  dentalCount   Int
  pharmacyCount Int

  calculatedAt DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([overallScore])
}
